<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>User Guide - Adobe FRL Online Proxy</title> <link rel="shortcut icon" href="/frl-online-proxy/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/frl-online-proxy/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/frl-online-proxy/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/frl-online-proxy/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>User Guide | Adobe FRL Online Proxy</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="User Guide" /> <meta property="og:locale" content="en" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="/frl-online-proxy/en/" /> <meta property="og:url" content="/frl-online-proxy/en/" /> <meta property="og:site_name" content="Adobe FRL Online Proxy" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"User Guide","url":"/frl-online-proxy/en/","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/frl-online-proxy/" class="site-title lh-tight"> Adobe FRL Online Proxy </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="/frl-online-proxy/en/" class="nav-list-link active">User Guide</a></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Adobe FRL Online Proxy" aria-label="Search Adobe FRL Online Proxy" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="&quot;no_toc&quot;" id="adobe-frl-online-proxy-user-guide"> <a href="#adobe-frl-online-proxy-user-guide" class="anchor-heading" aria-labelledby="adobe-frl-online-proxy-user-guide"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adobe FRL Online Proxy User Guide </h1> <h2 class="&quot;no_toc&quot;" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h2> <ul id="markdown-toc"> <li><a href="#overview" id="markdown-toc-overview">Overview</a> <ul> <li><a href="#setup-overview" id="markdown-toc-setup-overview">Setup Overview</a></li> </ul> </li> <li><a href="#set-up-a-server" id="markdown-toc-set-up-a-server">Set up a server</a></li> <li><a href="#installing-the-proxy" id="markdown-toc-installing-the-proxy">Installing the Proxy</a></li> <li><a href="#running-the-proxy" id="markdown-toc-running-the-proxy">Running the Proxy</a> <ul> <li><a href="#command-and-usage-summary" id="markdown-toc-command-and-usage-summary">Command and usage summary</a></li> </ul> </li> <li><a href="#ssl" id="markdown-toc-ssl">SSL</a></li> <li><a href="#proxy-configuration" id="markdown-toc-proxy-configuration">Proxy configuration</a> <ul> <li><a href="#example-configuration-file" id="markdown-toc-example-configuration-file">Example configuration file</a></li> <li><a href="#proxy-options" id="markdown-toc-proxy-options">Proxy options</a></li> <li><a href="#logging-options" id="markdown-toc-logging-options">Logging options</a></li> </ul> </li> <li><a href="#running-as-a-service" id="markdown-toc-running-as-a-service">Running as a service</a> <ul> <li><a href="#windows" id="markdown-toc-windows">Windows</a></li> <li><a href="#linux" id="markdown-toc-linux">Linux</a></li> </ul> </li> <li><a href="#creating-proxy-enabled-packages" id="markdown-toc-creating-proxy-enabled-packages">Creating proxy-enabled packages</a></li> <li><a href="#getting-help" id="markdown-toc-getting-help">Getting help</a></li> </ul> <h1 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h1> <p>The FRL Online Proxy is a simple solution for managing feature-restricted Adobe licenses in an isolated network. It is a terminating reverse proxy that facilitates license management for client machines that have restricted online access.</p> <p>FRL-Online licenses must, at a minimum, connect to Adobe’s licensing service once to activate a license, and again to deactivate the license. This presents a challenge for networks that have limited or no access to the Internet. On isolated networks, it may be infeasible or even impossible to facilitate access to Adobe’s licensing servers.</p> <p>FRL Online Proxy solves this problem by brokering requests to the licensing service on behalf of any client on the network.</p> <p><img src="/frl-online-proxy/en/media/network_diagram.png" alt="Network Layout Diagram" /></p> <h2 id="setup-overview"> <a href="#setup-overview" class="anchor-heading" aria-labelledby="setup-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup Overview </h2> <ol> <li>Set up a server to run FRL Online Proxy</li> <li>Install the proxy</li> <li>Acquire or generate SSL certificates if needed</li> <li>Run the proxy</li> <li>Set up logging if desired</li> <li>Run the proxy as a service</li> <li>Create and deploy proxy-enabled packages</li> </ol> <h1 id="set-up-a-server"> <a href="#set-up-a-server" class="anchor-heading" aria-labelledby="set-up-a-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up a server </h1> <p>FRL Online Proxy will run on any modern Windows or Linux server. This server must be part of the isolated network and be able to communicate with Adobe’s licensing service (<code class="language-plaintext highlighter-rouge">https://lcs-cops.adobe.io</code>). It does not require Internet access to any other host or service.</p> <p>We recommend creating a dedicated user account to run the proxy service. Note that it may be necessary to elevate this account’s privileges if the proxy needs to listen on port 443.</p> <p>Regardless of the port that will be used, the system must be configured to allow traffic from any host on the desired port.</p> <h1 id="installing-the-proxy"> <a href="#installing-the-proxy" class="anchor-heading" aria-labelledby="installing-the-proxy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing the Proxy </h1> <!-- 1. Download the [latest release](https://git.corp.adobe.com/dmeservices/frl-proxy/releases/latest) for the target platform. --> <ol> <li>Obtain the latest release for the target platform.</li> <li>Extract the release package to some root directory on the server (e.g. home directory).</li> <li>The proxy application binary (<code class="language-plaintext highlighter-rouge">frl-proxy</code> or <code class="language-plaintext highlighter-rouge">frl-proxy.exe</code> depending on platform) and associated utilities can be found in the <code class="language-plaintext highlighter-rouge">frl-proxy</code> directory.</li> </ol> <h1 id="running-the-proxy"> <a href="#running-the-proxy" class="anchor-heading" aria-labelledby="running-the-proxy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Proxy </h1> <p>The proxy service and associated tools are designed to be used from the command-line.</p> <p>Open a command-line terminal on the server and switch to the <code class="language-plaintext highlighter-rouge">frl-proxy</code> directory.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /path/to/frl-proxy
</code></pre></div></div> <p>Start the proxy with the <code class="language-plaintext highlighter-rouge">start</code> command.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Windows
&gt; .\frl-proxy.exe start

# Linux
$ ./frl-proxy start
</code></pre></div></div> <p>Starting the proxy with no additional command-line or config options will use the service’s default settings.</p> <ul> <li><strong>Host:</strong> localhost (127.0.0.1) on port 3030</li> <li><strong>Remote Host (Adobe licensing server):</strong> https://lcs-cops.adobe.io</li> <li>SSL disabled</li> <li>Log to console only at info level</li> </ul> <p>The host IP should generally be <code class="language-plaintext highlighter-rouge">0.0.0.0</code> - this will let the proxy accept traffic from client machines.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy start --host 0.0.0.0:8080
</code></pre></div></div> <h2 id="command-and-usage-summary"> <a href="#command-and-usage-summary" class="anchor-heading" aria-labelledby="command-and-usage-summary"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Command and usage summary </h2> <p>The proxy application currently supports two commands.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    init-config    Create a template config file
    start          Start the proxy server
</code></pre></div></div> <ul> <li><strong>init-config</strong>: Write a template config to the current directory (see <a href="#proxy-configuration">Proxy configuration</a> for more information).</li> <li><strong>start</strong>: Start the service</li> </ul> <p>The <code class="language-plaintext highlighter-rouge">start</code> command has some additional command-line options that govern proxy behavior.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    -c, --config-file &lt;config-file&gt;    Path to optional config file
        --host &lt;host&gt;                  Proxy hostname
        --remote-host &lt;remote-host&gt;    Remote (licensing server) hostname
        --ssl &lt;ssl&gt;                    Enable SSL? (true or false)
        --ssl-cert &lt;ssl-cert&gt;          Path to SSL certificate
        --ssl-key &lt;ssl-key&gt;            Path to SSL private key
</code></pre></div></div> <h1 id="ssl"> <a href="#ssl" class="anchor-heading" aria-labelledby="ssl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SSL </h1> <p>The proxy supports plain (non-SSL) mode for testing and debugging, but must use SSL with FRL-Online packages.</p> <p>SSL mode requires an X.509 SSL certificate and RSA or pkcs8 private key. These should be placed on the server in a secure part of the filesystem in a place where the proxy can access them.</p> <p>Consult your organization’s network security team if you need to use an organization certificate. Free cerftificates can be obtained from <a href="https://letsencrypt.org/">Let’s Encrypt</a>.</p> <p>SSL can be enabled by setting the command-line option <code class="language-plaintext highlighter-rouge">--ssl true</code> and setting the paths to the private key and certificate file with <code class="language-plaintext highlighter-rouge">--ssl-key</code> and <code class="language-plaintext highlighter-rouge">--ssl-cert</code> respectively.</p> <p>Example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy --ssl true --ssl-cert /path/to/cert.pem --ssl-key /path/to/key.pem
</code></pre></div></div> <p>This will start the proxy with SSL (https) enabled, listening on the default https host/port, <code class="language-plaintext highlighter-rouge">https://127.0.0.1:3030</code>.</p> <p><strong>Note:</strong> If the option <code class="language-plaintext highlighter-rouge">--ssl true</code> is in use, then the key and certificate paths must be specified. If they are specified when The <code class="language-plaintext highlighter-rouge">--ssl</code> option is omitted or <code class="language-plaintext highlighter-rouge">--ssl false</code> is specified, then those options are ignored and the server will start in plain (http) mode.</p> <h1 id="proxy-configuration"> <a href="#proxy-configuration" class="anchor-heading" aria-labelledby="proxy-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Proxy configuration </h1> <p>FRL Online Proxy supports an optional configuration file. This config file can be used to specify any command-line option used to start the proxy. It can also be used to control logging.</p> <p>The <code class="language-plaintext highlighter-rouge">init-config</code> command will generate a template config file. By default, this file will be named <code class="language-plaintext highlighter-rouge">config.toml</code> and be placed in the current working directory.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy init-config
Created config file 'config.toml'
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">-o/--out-file</code> option overrides the default output path and filename.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy init-config --out-file /path/to/my-frl-config.toml
Created config file '/path/to/my-frl-config.toml'
</code></pre></div></div> <p>To use the configuration file when starting the proxy, pass the <code class="language-plaintext highlighter-rouge">-c/--config-file</code> option.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy --config-file config.toml
or
$ ./frl-proxy -c config.toml
</code></pre></div></div> <h2 id="example-configuration-file"> <a href="#example-configuration-file" class="anchor-heading" aria-labelledby="example-configuration-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example configuration file </h2> <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[proxy]</span>
<span class="c"># Settings to invoke proxy server</span>
<span class="py">host</span> <span class="p">=</span> <span class="s">"0.0.0.0:8080"</span>
<span class="py">remote_host</span> <span class="p">=</span> <span class="s">"https://lcs-cops.adobe.io"</span>
<span class="py">ssl</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">ssl_cert</span> <span class="p">=</span> <span class="s">"/path/to/ssl_cert.pem"</span>
<span class="py">ssl_key</span> <span class="p">=</span> <span class="s">"/path/to/ssl_key.pem"</span>

<span class="nn">[logging]</span>
<span class="c"># Logging settings</span>
<span class="py">console_log_level</span> <span class="p">=</span> <span class="s">"debug"</span>
<span class="py">log_to_file</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">file_log_level</span> <span class="p">=</span> <span class="s">"info"</span>
<span class="py">file_log_path</span> <span class="p">=</span> <span class="s">"frl-proxy.log"</span>
</code></pre></div></div> <h2 id="proxy-options"> <a href="#proxy-options" class="anchor-heading" aria-labelledby="proxy-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Proxy options </h2> <p>The configuration options in the <code class="language-plaintext highlighter-rouge">[proxy]</code> section of the config file govern proxy behavior. Each option has an analagous command-line option.</p> <p><strong>Note:</strong> Each of these options are overridden by its respective command-line option. For example, if SSL is enabled in the config file and <code class="language-plaintext highlighter-rouge">--ssl false</code> is passed in the command line, then the proxy will start in plain (http) mode.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">host</code></td> <td>The host IP and port the proxy listens on. Format: <code class="language-plaintext highlighter-rouge">[host IP]:[port]</code><br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">127.0.0.1:3030</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">remote_host</code></td> <td>Adobe Licensing Service endpoint<br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">https://lcs-cops.adobe.io</code><br /><strong>Note:</strong> This will probably never need to be overridden except to debug network communication issues</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ssl</code></td> <td>Enable (<code class="language-plaintext highlighter-rouge">true</code>) or disable (<code class="language-plaintext highlighter-rouge">false</code>) SSL.<br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ssl_cert</code></td> <td>(optional) Path to SSL certificate file. Required if <code class="language-plaintext highlighter-rouge">ssl</code> is <code class="language-plaintext highlighter-rouge">true</code> and ignored otherwise</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ssl_key</code></td> <td>(optional) Path to SSL key file. Required if <code class="language-plaintext highlighter-rouge">ssl</code> is <code class="language-plaintext highlighter-rouge">true</code> and ignored otherwise</td> </tr> </tbody> </table></div> <h2 id="logging-options"> <a href="#logging-options" class="anchor-heading" aria-labelledby="logging-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Logging options </h2> <p>Options in the <code class="language-plaintext highlighter-rouge">[logging]</code> section govern logging behavior. By default, the proxy will log to the console (<code class="language-plaintext highlighter-rouge">stdout</code>) at the <code class="language-plaintext highlighter-rouge">info</code> verbosity level. The config can be used to change the console logging verbosity level or write log data to a file at a potentially different verbosity level.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">console_log_level</code></td> <td>Set the verbosity level for console log output<br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">info</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">log_to_file</code></td> <td>Enable (<code class="language-plaintext highlighter-rouge">true</code>) or disable (<code class="language-plaintext highlighter-rouge">false</code>) file logging<br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">file_log_level</code></td> <td>Set the verbosity level for file log output. Ignored if <code class="language-plaintext highlighter-rouge">log_to_file</code> is <code class="language-plaintext highlighter-rouge">false</code><br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">info</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">file_log_path</code></td> <td>Filename for file log output. Ignored if <code class="language-plaintext highlighter-rouge">log_to_file</code> is <code class="language-plaintext highlighter-rouge">false</code><br /><strong>Default:</strong> <code class="language-plaintext highlighter-rouge">frl-proxy.log</code> (current working directory)</td> </tr> </tbody> </table></div> <p><strong>Verbosity settings</strong></p> <p>The log verbosity level governs the nature and amount of information that is written to the log. The proxy supports five levels, which can be set in the config file. Log messages are prioritized based on message type - setting verbosity to a certain level will write messages at that level’s priority and anything above it. For example, setting the level to <code class="language-plaintext highlighter-rouge">warn</code> will output warnings and errors.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Level</th> <th style="text-align: center">Priority</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">error</code></td> <td style="text-align: center">1</td> <td>Errors that impact the performance or reliability of the application</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">warn</code></td> <td style="text-align: center">2</td> <td>Warnings that may indicate an issue, but should not impact general performance or reliability</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">info</code></td> <td style="text-align: center">3</td> <td>Useful messages</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">debug</code></td> <td style="text-align: center">4</td> <td>Lower-priority messages that may be useful for debugging purposes</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">trace</code></td> <td style="text-align: center">5</td> <td>Low-level application debugging information</td> </tr> </tbody> </table></div> <h1 id="running-as-a-service"> <a href="#running-as-a-service" class="anchor-heading" aria-labelledby="running-as-a-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running as a service </h1> <p>To ensure the highest level of availability and reliability, the proxy should be run as a service. This ensures that the proxy is always running. If the service is interrupted for any reason (such as system reboot), it will automatically restart.</p> <p>There are different methods for installing and enabling the proxy as a service depending on the environment.</p> <h2 id="windows"> <a href="#windows" class="anchor-heading" aria-labelledby="windows"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Windows </h2> <p>Windows realeases of FRL Online Proxy include tools for setting up the service. The script <code class="language-plaintext highlighter-rouge">bin\service.ps1</code> provides a simple interface for managing the proxy as a service.</p> <p>Example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; .\service.ps1 start
Service "FRL Online Proxy" installed successfully!
FRL Online Proxy: START: The operation completed successfully.
</code></pre></div></div> <p>Notes:</p> <ul> <li>Windows Powershell is required to run <code class="language-plaintext highlighter-rouge">service.ps1</code></li> <li>Administrator rights are required to install the service, so run <code class="language-plaintext highlighter-rouge">service.ps1</code> from a Powershell Admin console.</li> <li><code class="language-plaintext highlighter-rouge">service.ps1</code> must be run from the <code class="language-plaintext highlighter-rouge">frl-proxy</code> working directory</li> <li>A config file is required with the filename <code class="language-plaintext highlighter-rouge">config.toml</code>. This file must be in the same working directory as <code class="language-plaintext highlighter-rouge">frl-proxy.exe</code> and <code class="language-plaintext highlighter-rouge">service.ps1</code>. See <a href="#proxy-configuration">Proxy configuration</a> for more information.</li> </ul> <p>Commands:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">start</code></td> <td>Install and start the proxy as a service.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">stop</code></td> <td>Stop the proxy service</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">restart</code></td> <td>Restart the proxy service</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">remove</code></td> <td>Stop the service if necessary and remove from the registry</td> </tr> </tbody> </table></div> <p>When the service is installed and running, you can view the status of the service in Windows Service Manager.</p> <ol> <li>Open the run dialog - <code class="language-plaintext highlighter-rouge">Windows Key + R</code></li> <li>Enter the command <code class="language-plaintext highlighter-rouge">services.msc</code></li> <li>Press Enter</li> <li>The Service Manager will open showing a list of services installed on the system</li> <li>Ensure that FRL Online Proxy is installed, running and has a Startup Type of “Automatic” <img src="/frl-online-proxy/en/media/windows_service.png" alt="Service Manager" /></li> </ol> <p>If something doesn’t work as expected, see <a href="#getting-help">Getting help</a>.</p> <h2 id="linux"> <a href="#linux" class="anchor-heading" aria-labelledby="linux"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linux </h2> <p>On Linux systems, the easiest way to set up a service for the proxy is (systemd)[https://systemd.io/].</p> <p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">sudo</code> privileges are required for many of these steps. We recommend creating or designating a non-privileged user account that will run the proxy and own the configuration and log files.</p> <ol> <li>Download the latest release to the desired system.</li> <li>Extract the <code class="language-plaintext highlighter-rouge">frl-proxy</code> binary to a system binary directory such as <code class="language-plaintext highlighter-rouge">/usr/bin</code></li> <li>Generate a config file (see <a href="#proxy-configuration">Proxy configuration</a>)</li> <li>Open the config file in a text editor and configure proxy and logging settings (host, ssl settings) <ul> <li>If the proxy will be run by a non-privileged account, it is necessary to set the proxy to listen on a port number higher than 1024 (e.g. 4343)</li> <li>The config file should be copied to a system data directory (we recommend <code class="language-plaintext highlighter-rouge">/etc/frl-proxy</code>)</li> <li>The log file should be written to a system log directory such as <code class="language-plaintext highlighter-rouge">/var/log</code> (we recommend <code class="language-plaintext highlighter-rouge">/var/log/frl-proxy</code>)</li> </ul> </li> <li>If you are going to run the proxy as a non-privileged user, change ownership of config file and log directory. Replace <code class="language-plaintext highlighter-rouge">[user]</code> and <code class="language-plaintext highlighter-rouge">[group]</code> with the user and group of the non-privileged account. <ul> <li><code class="language-plaintext highlighter-rouge">sudo chown [user]:[group] /etc/frl-proxy/config.toml</code></li> <li><code class="language-plaintext highlighter-rouge">sudo chown -R [user]:[group] /var/log/frl-proxy</code></li> </ul> </li> <li>Create the service configuration file <code class="language-plaintext highlighter-rouge">/etc/systemd/system/frl-proxy.service</code> and open it in a text editor</li> <li> <p>Copy this example configuration to the editor. Be sure to change the paths to the proxy binary and config file if necessary. And replace <code class="language-plaintext highlighter-rouge">[user]</code> with the name of the account that will run the proxy.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Unit]
Description=FRL Online Proxy
After=network.target
StartLimitIntervalSec=0

[Service]
Type=simple
Restart=always
RestartSec=1
User=[user]
ExecStart=/usr/bin/frl-proxy start -c /etc/frl-proxy/config.toml

[Install]
WantedBy=multi-user.target
</code></pre></div> </div> </li> </ol> <p>With the service config in place, the service can be controlled with <code class="language-plaintext highlighter-rouge">systemctl</code>. Here are some examples of how to manage the service.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enable/disable determines if the service will start on boot</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>frl-proxy
<span class="nb">sudo </span>systemctl disable frl-proxy

<span class="c"># Start/stop will manually start and stop the service, restart will stop and then start it</span>
<span class="nb">sudo </span>systemctl start frl-proxy
<span class="nb">sudo </span>systemctl stop frl-proxy
<span class="nb">sudo </span>systemctl restart frl-proxy

<span class="c"># If any changes are made to the frl-proxy.service config, the systemd daemon must be reloaded</span>
<span class="nb">sudo </span>systemctl daemon-reload
</code></pre></div></div> <p>If something doesn’t work as expected, see <a href="#getting-help">Getting help</a>.</p> <h1 id="creating-proxy-enabled-packages"> <a href="#creating-proxy-enabled-packages" class="anchor-heading" aria-labelledby="creating-proxy-enabled-packages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating proxy-enabled packages </h1> <p>FRL-Online packages must be configured to use the proxy. Proxy settings are managed in the Adobe Admin Console.</p> <ol> <li>Log into the <a href="https://adminconsole.adobe.com">Admin Console</a></li> <li>Click the “Packages” tab on the top navigation bar.</li> <li>Click the blue “Create a Package” button.</li> <li>Select “Feature restricted licensing” and then “Next”</li> <li>Select “Online” and then “Next”</li> <li>Select entitlement, OS and product (app) options</li> <li> <p>On the next page, under “Management Options”, select “Contact Adobe through a reverse proxy”</p> <p><img src="/frl-online-proxy/en/media/proxy_setting.png" alt="Proxy Setting" /></p> <p>Update the “DNS Entry or IP address” field to point to the FRL Online Proxy service. This can be a plain IP address or a hostname. Don’t forget to specify the port number if using a non-standard port.</p> </li> </ol> <h1 id="getting-help"> <a href="#getting-help" class="anchor-heading" aria-labelledby="getting-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting help </h1> <p>All bug requests, feature requests, questions and feedback submissions are handled with Github issues. Please create a new <a href="https://github.com/adobe/frl-online-proxy/issues">issue</a> if you need any assisance or support.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
