<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>User Guide - Adobe FRL Online Proxy</title> <link rel="shortcut icon" href="/frl-online-proxy/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/frl-online-proxy/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/frl-online-proxy/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/frl-online-proxy/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>User Guide | Adobe FRL Online Proxy</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="User Guide" /> <meta property="og:locale" content="en" /> <meta name="description" content="A simple solution for managing feature-restricted Adobe licenses in an isolated network environment." /> <meta property="og:description" content="A simple solution for managing feature-restricted Adobe licenses in an isolated network environment." /> <link rel="canonical" href="/frl-online-proxy/en/" /> <meta property="og:url" content="/frl-online-proxy/en/" /> <meta property="og:site_name" content="Adobe FRL Online Proxy" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="User Guide" /> <script type="application/ld+json"> {"url":"/frl-online-proxy/en/","@type":"WebPage","headline":"User Guide","description":"A simple solution for managing feature-restricted Adobe licenses in an isolated network environment.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/frl-online-proxy/" class="site-title lh-tight"> Adobe FRL Online Proxy </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="/frl-online-proxy/en/" class="nav-list-link active">User Guide</a></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Adobe FRL Online Proxy" aria-label="Search Adobe FRL Online Proxy" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="&quot;no_toc&quot;" id="adobe-frl-online-proxy-user-guide"> <a href="#adobe-frl-online-proxy-user-guide" class="anchor-heading" aria-labelledby="adobe-frl-online-proxy-user-guide"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adobe FRL Online Proxy User Guide </h1> <h2 class="&quot;no_toc&quot;" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h2> <ul id="markdown-toc"> <li><a href="#overview" id="markdown-toc-overview">Overview</a> <ul> <li><a href="#use-cases" id="markdown-toc-use-cases">Use Cases</a> <ul> <li><a href="#always-connected-networks" id="markdown-toc-always-connected-networks">Always-connected networks</a></li> <li><a href="#intermittently-connected-networks" id="markdown-toc-intermittently-connected-networks">Intermittently-connected networks</a></li> <li><a href="#fully-isolated-networks" id="markdown-toc-fully-isolated-networks">Fully-isolated networks</a></li> <li><a href="#isolated-machines" id="markdown-toc-isolated-machines">Isolated machines</a></li> </ul> </li> <li><a href="#setup-overview" id="markdown-toc-setup-overview">Setup Overview</a></li> </ul> </li> <li><a href="#set-up-a-server" id="markdown-toc-set-up-a-server">Set up a server</a></li> <li><a href="#installing-the-proxy" id="markdown-toc-installing-the-proxy">Installing the Proxy</a> <ul> <li><a href="#windows" id="markdown-toc-windows">Windows</a></li> <li><a href="#linux" id="markdown-toc-linux">Linux</a></li> </ul> </li> <li><a href="#running-the-proxy" id="markdown-toc-running-the-proxy">Running the Proxy</a> <ul> <li><a href="#command-and-usage-summary" id="markdown-toc-command-and-usage-summary">Command and usage summary</a></li> </ul> </li> <li><a href="#ssl" id="markdown-toc-ssl">SSL</a></li> <li><a href="#cache-store-and-forward" id="markdown-toc-cache-store-and-forward">Cache, Store and Forward</a></li> <li><a href="#cache-management" id="markdown-toc-cache-management">Cache Management</a> <ul> <li><a href="#clear" id="markdown-toc-clear">Clear</a></li> <li><a href="#export" id="markdown-toc-export">Export</a></li> <li><a href="#import" id="markdown-toc-import">Import</a></li> </ul> </li> <li><a href="#working-with-an-upstream-proxy" id="markdown-toc-working-with-an-upstream-proxy">Working with an Upstream Proxy</a></li> <li><a href="#proxy-configuration" id="markdown-toc-proxy-configuration">Proxy Configuration</a> <ul> <li><a href="#proxy-options" id="markdown-toc-proxy-options">Proxy Options</a></li> <li><a href="#ssl-options" id="markdown-toc-ssl-options">SSL Options</a></li> <li><a href="#logging-options" id="markdown-toc-logging-options">Logging Options</a></li> <li><a href="#cache-options" id="markdown-toc-cache-options">Cache Options</a></li> <li><a href="#network-options" id="markdown-toc-network-options">Network Options</a></li> </ul> </li> <li><a href="#running-as-a-service" id="markdown-toc-running-as-a-service">Running as a service</a> <ul> <li><a href="#windows-1" id="markdown-toc-windows-1">Windows</a></li> <li><a href="#linux-1" id="markdown-toc-linux-1">Linux</a></li> </ul> </li> <li><a href="#creating-proxy-enabled-packages" id="markdown-toc-creating-proxy-enabled-packages">Creating proxy-enabled packages</a></li> <li><a href="#getting-help" id="markdown-toc-getting-help">Getting help</a></li> </ul> <h1 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h1> <p>The FRL Online Proxy is a simple solution for managing feature-restricted (FRL) Adobe licenses in an isolated network. It is a caching, terminating reverse proxy that facilitates license management for client machines that have restricted online access.</p> <p>Each OS user of each Adobe application that activates via FRL Online must be able, when launching the application for the first time, to connect to Adobe’s licensing servers. If another OS user requires use of that same application (or if the original OS user wants to use a second application), then that other OS user (or that other application) must also, on their first launch, be able to connect to Adobe’s licensing servers.</p> <p>This “first launch while connected” requirement presents a challenge for customers whose networks have limited or no access to the Internet. On such networks, it may be infeasible or even impossible for users to have network access to Adobe servers when launching their applications for the first time.</p> <p>The FRL Online Proxy solves this customer problem by brokering requests to the licensing service on behalf of any client machine on the network. A customer who wishes to keep his users or their machines from contacting the internet can let them connect on their local network to the FRL Online Proxy, and then allow the FRL Online proxy to contact Adobe servers. This is completely safe for the customer, because the proxy will not accept anything but license requests from clients, and those requests will only be sent to the Adobe servers.</p> <p>For customers who want to put their proxy on an internal network with is either intermittently connected or never connected to Adobe licensing servers, the proxy also supports license caching and store/forward relay capabilities. The license caching means that, if there are multiple users on a machine who use the same application, the proxy needs to connect to Adobe only for one of them, because the resulting activation will automatically be reused for other users on that machine. The store/forward capability means that, if a customer deploys the proxy on a fully isolated network, they can use an administrative process to collect the stored activation requests, send them to Adobe, and get the responses back to the internal proxy. That internal proxy will then use the cached responses to activate all the internal machines.</p> <p><img src="/frl-online-proxy/en/media/network_diagram.png" alt="Network Layout Diagram" /></p> <h2 id="use-cases"> <a href="#use-cases" class="anchor-heading" aria-labelledby="use-cases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Cases </h2> <h3 id="always-connected-networks"> <a href="#always-connected-networks" class="anchor-heading" aria-labelledby="always-connected-networks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Always-connected networks </h3> <p>If a proxy instance can always contact Adobe servers, then it can be run in <code class="language-plaintext highlighter-rouge">passthrough</code> mode where it passes through every received request to Adobe and returns the response directly to the client. This setup is typically used for security purposes, because it prevents users on the proxy’s LAN from having direct internet access while still allowing their applications to be licensed via FRL Online. The advantage of not turning on caching in this case is that the proxy uses no database resources and thus can be run forever with no administrative overhead.</p> <h3 id="intermittently-connected-networks"> <a href="#intermittently-connected-networks" class="anchor-heading" aria-labelledby="intermittently-connected-networks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Intermittently-connected networks </h3> <p>If a proxy instance is on an intermittently-connected network, then it can be run in <code class="language-plaintext highlighter-rouge">cache</code> mode where it caches responses from Adobe while connected and then reuses them when offline. A proxy running in <code class="language-plaintext highlighter-rouge">cache</code> mode works similarly to one running in <code class="language-plaintext highlighter-rouge">passthrough</code> mode, but it always stores in the database the latest request it has received from each application on each machine, and whenever it receives a matching response to a request it stores that also. That way, after having run for a period of time connected, the proxy can successfully respond to all requests from machines on its local network, even if they come from OS users who have not previously activated their applications.</p> <p>If new machines or applications are deployed to a network while the network is offline, the proxy will not be able to activate those machines or applications, but it will remember the requests for activation in its database. Then, when the proxy regains connectivity to Adobe, an administrator can perform one run of the proxy in <code class="language-plaintext highlighter-rouge">forward</code> mode, which will cause it to get responses to all of the cached requests. That way, when the proxy is taken back offline, the new machine or applications whose requests were forwarded and whose responses were stored will be able to activate as expected.</p> <p>Because the proxy uses a file-based database when in <code class="language-plaintext highlighter-rouge">cache</code> mode, its machine must have enough disk space available to store one request/response pair for each application on each machine, where each pair is typically less than 10K bytes in size. In addition, as described above, proxies running in <code class="language-plaintext highlighter-rouge">cache</code> mode should be run once in <code class="language-plaintext highlighter-rouge">forward</code> mode whenever they have been offline while new machines or applications were deployed to their LAN.</p> <h3 id="fully-isolated-networks"> <a href="#fully-isolated-networks" class="anchor-heading" aria-labelledby="fully-isolated-networks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Fully-isolated networks </h3> <p>If a proxy is going to be used effectively on a fully isolated network, then a second proxy on a connected network is required so that the two can run as a “store-forward pair”, as follows:</p> <ul> <li>Let’s call the two proxy instances SI and FI (for <em>storing instance</em> and <em>forwarding instance</em>). Configure SI and FI so they both use databases that are called <code class="language-plaintext highlighter-rouge">proxy-db.sqlite</code>. Make sure the FI instance has access to Adobe servers over the network.</li> <li>Run SI in <code class="language-plaintext highlighter-rouge">store</code> mode on a regular basis (using <code class="language-plaintext highlighter-rouge">frl-proxy -m store</code>). This will cause it to collect all requests that it cannot answer from its cache of responses, but because it’s on an isolated network it will not try to contact Adobe.</li> <li>From time to time, stop SI for a moment. Collect all the unanswered requests it has accumulated by invoking <code class="language-plaintext highlighter-rouge">frl-proxy export stored-requests.sqlite</code>. (This exports any unanswered requests in proxy-db.sqlite to a new database stored-requests.sqlite.) Then restart the SI instance as usual with <code class="language-plaintext highlighter-rouge">frl-proxy -m store</code>.</li> <li>Move the <code class="language-plaintext highlighter-rouge">stored-requests.sqlite</code> database file to the FI instance location and rename it <code class="language-plaintext highlighter-rouge">frl-proxy.sqlite</code> so it’s the database used by FI.</li> <li>Forward all the stored requests to Adobe by invoking FI with <code class="language-plaintext highlighter-rouge">frl-proxy -m forward</code>. This will complete quickly, sending all the stored requests in the <code class="language-plaintext highlighter-rouge">frl-proxy.sqlite</code> database to Adobe servers and storing the responses in the same database.</li> <li>When the forwarding has completed, move the <code class="language-plaintext highlighter-rouge">frl-proxy.sqlite database</code> from the FI machine to the SI machine and rename it <code class="language-plaintext highlighter-rouge">forwarded-requests.sqlite</code>.</li> <li>Stop the SI instance for a moment. Import the database of forwarded responses into the SI instance by invoking <code class="language-plaintext highlighter-rouge">frl-proxy import forwarded-requests.sqlite</code>. This will move all the received responses into the <code class="language-plaintext highlighter-rouge">proxy-db.sqlite</code> file. Restart the SI instance as usual with <code class="language-plaintext highlighter-rouge">frl-proxy -m store</code>.</li> </ul> <p>At this point all the forward response will be available to the storing instance, so any apps whose requests had been stored will be successfully activated when they are next launched.</p> <p>See <a href="#cache-management">cache management</a> for more information on the proxy <code class="language-plaintext highlighter-rouge">export</code> and <code class="language-plaintext highlighter-rouge">import</code> commands.</p> <h3 id="isolated-machines"> <a href="#isolated-machines" class="anchor-heading" aria-labelledby="isolated-machines"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Isolated machines </h3> <p>There is a variant of the store-forward architecture described above that can be used to pre-activate all the applications on an isolated machine. In this use case, we have one or more machines that are being set up for use on an isolated network, but during the setup process they have access to the network. In this case, the procedure is as follows:</p> <ul> <li>In addition to installing the applications and (proxy) licenses on the isolated machines, each isolated machine also gets configured with its own instance of the FRL Proxy (using a trusted certificate for localhost) that is configured to run in <code class="language-plaintext highlighter-rouge">store</code> mode as a service.</li> <li>While the machines are connected to the network, an administrator runs the proxy in <code class="language-plaintext highlighter-rouge">cache</code> mode and launches each of the applications that are to be activated.</li> <li>Then the machines are put in their isolated locations.</li> </ul> <p>Because activating the applications in <code class="language-plaintext highlighter-rouge">cache</code> mode will cache the initial activation responses in the database, each machine’s proxy (now running in <code class="language-plaintext highlighter-rouge">store</code> mode) will be able to activate the application even when they are launched for the first time by other OS users on the isolated machines.</p> <h2 id="setup-overview"> <a href="#setup-overview" class="anchor-heading" aria-labelledby="setup-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup Overview </h2> <ol> <li>Set up a server to run FRL Online Proxy</li> <li>Install the proxy</li> <li>Acquire or generate SSL certificates if needed</li> <li>Run the proxy</li> <li>Set up logging if desired</li> <li>Run the proxy as a service</li> <li>Create and deploy proxy-enabled packages</li> </ol> <h1 id="set-up-a-server"> <a href="#set-up-a-server" class="anchor-heading" aria-labelledby="set-up-a-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up a server </h1> <p>FRL Online Proxy will run on any modern Windows or Linux server. To run in <code class="language-plaintext highlighter-rouge">passthrough</code> mode, the server must be part of the isolated network and be able to communicate with Adobe’s licensing service (<code class="language-plaintext highlighter-rouge">https://lcs-cops.adobe.io</code>). It does not require Internet access to any other host or service.</p> <p>If the server does not have consistent (or any) access to the licensing service, the proxy should be run in <code class="language-plaintext highlighter-rouge">cache</code> or <code class="language-plaintext highlighter-rouge">store</code> mode. <code class="language-plaintext highlighter-rouge">cache</code> mode will cache all license activation and deactivation requests from FRL clients and attempt to fulfill them with the licensing service. <code class="language-plaintext highlighter-rouge">store</code> will just cache requests without attempting to contact the licensing service.</p> <p>We recommend creating a dedicated user account to run the proxy service. Note that it may be necessary to elevate this account’s privileges if the proxy needs to listen on privileged ports like 80 or 443.</p> <p>Regardless of the port that will be used, the system must be configured to allow traffic from any host on the desired port (e.g. <code class="language-plaintext highlighter-rouge">0.0.0.0:8443</code>).</p> <h1 id="installing-the-proxy"> <a href="#installing-the-proxy" class="anchor-heading" aria-labelledby="installing-the-proxy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing the Proxy </h1> <h3 id="windows"> <a href="#windows" class="anchor-heading" aria-labelledby="windows"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Windows </h3> <ol> <li>Download the <a href="https://github.com/adobe/frl-online-proxy/releases/latest">latest release</a>.</li> <li>Open the application zip</li> <li>Copy the <code class="language-plaintext highlighter-rouge">frl-proxy</code> directory to your desired root location</li> <li>Open a PowerShell terminal</li> <li>Change directory to the frl-proxy location <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; cd c:\path\to\frl-proxy
</code></pre></div> </div> </li> <li>Run the proxy <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; .\frl-proxy.exe start
</code></pre></div> </div> </li> </ol> <h3 id="linux"> <a href="#linux" class="anchor-heading" aria-labelledby="linux"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linux </h3> <ol> <li>Download the <a href="https://github.com/adobe/frl-online-proxy/releases/latest">latest release</a>. We recommend downloading it to the root of the proxy directory (e.g. <code class="language-plaintext highlighter-rouge">/home/[user]</code>) <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ wget https://github.com/adobe/frl-online-proxy/releases/download/v0.5.1/frl-proxy-linux-0.5.1.tar.gz
</code></pre></div> </div> </li> <li>Extract the archive <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ tar xf frl-proxy-linux-0.5.1.tar.gz
</code></pre></div> </div> </li> <li>The archive will extract to the directory <code class="language-plaintext highlighter-rouge">frl-proxy</code>, which contains the application binary <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd frl-proxy
$ ./frl-proxy start
</code></pre></div> </div> </li> </ol> <h1 id="running-the-proxy"> <a href="#running-the-proxy" class="anchor-heading" aria-labelledby="running-the-proxy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Proxy </h1> <p>The proxy service and associated tools are designed to be used from the command-line.</p> <p>Open a command-line terminal on the server and switch to the <code class="language-plaintext highlighter-rouge">frl-proxy</code> directory.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /path/to/frl-proxy
</code></pre></div></div> <p>Start the proxy with the <code class="language-plaintext highlighter-rouge">start</code> command.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Windows
&gt; .\frl-proxy.exe start

# Linux
$ ./frl-proxy start
</code></pre></div></div> <p>When you start the proxy for the first time, you will be prompted to specify a few configuration options. This includes run mode, host IP, host ports, SSL info, caching info, etc. These settings are saved to a configuration file. When the configuration file is present, the proxy will start without prompting for these options an additional time.</p> <p>Example configuration transcript:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Creating initial configuration file...
The proxy has four modes: cache, store, forward, and passthrough.
Read the user guide to understand which is right for each situation.
Proxy mode: cache
The proxy uses a SQLite database to keep track of requests and responses.
The proxy will create this database if one does not already exist.
Name of (or path to) your database file: proxy-cache.sqlite
The host and port of the proxy must match the one in your license package.
Host IP to listen on: 0.0.0.0
Host port for http (non-ssl) mode: 8080
Your proxy server must contact one of two Adobe licensing servers.
Use the variable IP server unless your firewall doesn't permit it.
Adobe licensing server: Variable IP server (lcs-cops.adobe.io)
MacOS applications can only connect to the proxy via SSL.
Windows applications can use SSL, but they don't require it.
Use SSL? yes
Host port for https mode: 8443
The proxy requires a certificate store in PKCS format to use SSL.
Read the user guide to learn how to obtain and prepare this file.
Name of (or path to) your cert file: proxy-cert.pfx
Usually, for security, PKCS files are encrypted with a password.
Your proxy will require that password in order to function properly.
You have the choice of storing your password in your config file or
in the value of an environment variable (FRL_PROXY_SSL.CERT_PASSWORD).
Do you want to store a password in your configuration file? no
Do you want to customize your proxy server's logging configuration? yes
The proxy can log to the console (standard output) or to a file on disk.
Log destination: console
The proxy will log errors, warnings and summary information.
Do you want to adjust the level of logged information? yes
Read the user guide to find out more about logging levels.
Log level: debug
Wrote config file 'proxy-conf.toml'
</code></pre></div></div> <p>Once the configuration wizard completes, configuration options are written to <code class="language-plaintext highlighter-rouge">proxy-conf.toml</code>.</p> <p>Once the configuration file is created, run the same command to start the proxy.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Windows
&gt; .\frl-proxy.exe start

# Linux
$ ./frl-proxy start
</code></pre></div></div> <p>The configuration file can be edited in any text editor. You can also use the <code class="language-plaintext highlighter-rouge">configure</code> command to initiate a walkthrough of configuration options similar to the one presented on initial configuration.</p> <h2 id="command-and-usage-summary"> <a href="#command-and-usage-summary" class="anchor-heading" aria-labelledby="command-and-usage-summary"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Command and usage summary </h2> <p>Proxy functionality is driven by command. The main command, <code class="language-plaintext highlighter-rouge">start</code>, is used to run the proxy according to the configuration file.</p> <p>Other commands exist to help configure the proxy or manage the cache. To get a full list of supported options and commands, pass the <code class="language-plaintext highlighter-rouge">-h</code> or <code class="language-plaintext highlighter-rouge">--help</code> option.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; .\frl-proxy.exe -h

frl-proxy 1.0.0
FRL Proxy

USAGE:
    frl-proxy.exe [FLAGS] [OPTIONS] &lt;SUBCOMMAND&gt;

FLAGS:
    -d               Specify once to force log level to debug. Specify twice to force log level to trace
    -h, --help       Prints help information
    -V, --version    Prints version information

OPTIONS:
    -c, --config-file &lt;config-file&gt;    Path to config file [default: proxy-conf.toml]
    -l, --log-to &lt;log-to&gt;              Override configured log destination: 'console' or 'file'. You can use just the
                                       first letter, so '-l c' and '-l f' work

SUBCOMMANDS:
    clear        Clear the cache (requires confirmation)
    configure    Interactively create the config file
    export       Export stored requests for a forwarder
    help         Prints this message or the help of the given subcommand(s)
    import       Import stored responses from a forwarder
    start        Start the proxy server
</code></pre></div></div> <p>This not only documents supported commands, but shows which flags and options can be used with any command.</p> <ul> <li><code class="language-plaintext highlighter-rouge">-c/--config-file</code> - specify config file path (default is <code class="language-plaintext highlighter-rouge">proxy-conf.toml</code>)</li> <li><code class="language-plaintext highlighter-rouge">-d</code> - change log verbosity</li> <li><code class="language-plaintext highlighter-rouge">-l/--log-to</code> - change log target</li> </ul> <p>Any of these options must be specified before the command. For example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy -l console -c /path/to/proxy-conf.toml start
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">start</code> command provides a limited number of command-line options to override certain configuration file options.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    -m, --mode &lt;mode&gt;    Mode to run the proxy in, one of passthrough, cache, store, or forward. You can use any prefix
                         of these names (minimally p, c, s, or f)
        --ssl &lt;ssl&gt;      Enable SSL? (true or false)
</code></pre></div></div> <p>These are specified after the <code class="language-plaintext highlighter-rouge">start</code> command.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy start -m cache
</code></pre></div></div> <h1 id="ssl"> <a href="#ssl" class="anchor-heading" aria-labelledby="ssl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SSL </h1> <p>The proxy supports both SSL (https) and non-SSL (http) clients. This allows customers the opportunity to examine the actual data transferred during the activation process and so ensure that no sensitive data is being exchanged. (Please note: Adobe applications running on MacOS cannot be configured to send activation requests via HTTP, but customers can use an HTTPS to HTTP proxy between those applications and the FRL proxy so that it can be used in non-SSL-client mode.)</p> <p>SSL mode requires an X.509 SSL certificate and password. The certificate file should be secured with limited file permissions so that only the account running the proxy can read it.</p> <p>The password can be stored in plain text in the configuration file or in the environment variable <code class="language-plaintext highlighter-rouge">FRL_PROXY_SSL.CERT_PASSWORD</code>. If you store your password in the configuration, be sure to limit access to that file.</p> <p>The SSL certificate must be trusted by the client machines that contact the proxy, but it need not be a publicly-signed certificate (that is, it can be a self-signed certificate that is installed on the client machines and marked as trusted). For testing, you may wish to use a free, short-lived, renewable, publicly-signed certificate obtained from <a href="https://letsencrypt.org/">Let’s Encrypt</a>. Consult your organization’s network security team if you need to use a long-lived, publicly-signed certificate.</p> <p>SSL options are configured in <code class="language-plaintext highlighter-rouge">proxy-conf.toml</code>:</p> <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[proxy]</span>
<span class="py">ssl</span> <span class="p">=</span> <span class="kc">true</span>

<span class="nn">[ssl]</span>
<span class="py">cert_path</span> <span class="p">=</span> <span class="s">"proxy-cert.pfx"</span>
<span class="py">cert_password</span> <span class="p">=</span> <span class="s">"password"</span>
</code></pre></div></div> <p>SSL mode can be toggled with the <code class="language-plaintext highlighter-rouge">--ssl</code> command-line option:</p> <p>Example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy start --ssl false
</code></pre></div></div> <h1 id="cache-store-and-forward"> <a href="#cache-store-and-forward" class="anchor-heading" aria-labelledby="cache-store-and-forward"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cache, Store and Forward </h1> <p>The most basic mode, <code class="language-plaintext highlighter-rouge">passthrough</code>, forwards live calls to Adobe’s licensing services without caching any data. It doesn’t cache any license activation or deactivation requests or responses, and requires a live connection to the Internet at all times.</p> <p>The proxy can be set up to use a local cache to store data for various use cases.</p> <ul> <li><strong>Requests</strong> - Activation and deactivation requests are cached in <code class="language-plaintext highlighter-rouge">cache</code> and <code class="language-plaintext highlighter-rouge">store</code> modes. If an activation/deactivation response for a given request is unavailable, the proxy stores the request for later forwarding (when it has internet access).</li> <li><strong>Responses</strong> - Activation and deactivation responses are cached in <code class="language-plaintext highlighter-rouge">cache</code> and <code class="language-plaintext highlighter-rouge">forward</code> modes. When operating in <code class="language-plaintext highlighter-rouge">cache</code> mode, if a request comes in whose matching response is already in the cache, the proxy will return that response even if it cannot contact Adobe servers.</li> </ul> <p>The mode can be set in <code class="language-plaintext highlighter-rouge">proxy-conf.toml</code>:</p> <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[proxy]</span>
<span class="py">mode</span> <span class="p">=</span> <span class="s">"cache"</span>
</code></pre></div></div> <p>It can also be overridden using the <code class="language-plaintext highlighter-rouge">-m/--mode</code> command-line option:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy start --mode cache
</code></pre></div></div> <h1 id="cache-management"> <a href="#cache-management" class="anchor-heading" aria-labelledby="cache-management"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cache Management </h1> <p>The proxy provides commands to clear, import or export the cache.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    clear        Clear the cache (requires confirmation)
    export       Export stored requests for a forwarder
    import       Import stored responses from a forwarder
</code></pre></div></div> <h2 id="clear"> <a href="#clear" class="anchor-heading" aria-labelledby="clear"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Clear </h2> <p>The <code class="language-plaintext highlighter-rouge">clear</code> command will clear the cache. No backup is made, so use this command with caution.</p> <p>Running <code class="language-plaintext highlighter-rouge">clear</code> by itself will prompt for confirmation:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy clear
Really clear the cache? This operation cannot be undone. yes
Cache has been cleared.
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">-y</code> option can be used to bypass this confirmation, in case you need to clear the cache automatically without human interaction:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy clear -y
Cache has been cleared.
</code></pre></div></div> <h2 id="export"> <a href="#export" class="anchor-heading" aria-labelledby="export"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Export </h2> <p>A proxy running in <code class="language-plaintext highlighter-rouge">cache</code> or <code class="language-plaintext highlighter-rouge">store</code> mode can use the <code class="language-plaintext highlighter-rouge">export</code> command to export all unfulfilled license requests to a database file.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>frl-proxy.exe-export 1.0.0
Export stored requests for a forwarder

USAGE:
    frl-proxy.exe export &lt;export-path&gt;

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

ARGS:
    &lt;export-path&gt;
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">export</code> takes one positional argument - the filename of the database file that will contain exported data.</p> <p>Example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy export proxy-store.sqlite
Exported 24 stored request(s) to proxy-store.sqlite
</code></pre></div></div> <h2 id="import"> <a href="#import" class="anchor-heading" aria-labelledby="import"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Import </h2> <p>A proxy running in <code class="language-plaintext highlighter-rouge">cache</code> or <code class="language-plaintext highlighter-rouge">store</code> mode can use the <code class="language-plaintext highlighter-rouge">import</code> command to import all the stored responses that were received during a connected <code class="language-plaintext highlighter-rouge">cache</code> or <code class="language-plaintext highlighter-rouge">forward</code> session.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>frl-proxy.exe-import 1.0.0
Import stored responses from a forwarder

USAGE:
    frl-proxy.exe import &lt;import-path&gt;

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

ARGS:
    &lt;import-path&gt;
</code></pre></div></div> <p>The positional argument specifies that path of a data file to import.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./frl-proxy import proxy-store.sqlite
Imported 24 forwarded request/response pair(s) from proxy-store.sqlite
</code></pre></div></div> <h1 id="working-with-an-upstream-proxy"> <a href="#working-with-an-upstream-proxy" class="anchor-heading" aria-labelledby="working-with-an-upstream-proxy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Working with an Upstream Proxy </h1> <p>The FRL Online Proxy can be configured to use an upstream proxy in order to communicate with Adobe’s licensing service. It can be used with no authentication or with basic authentication. It can be configured using the interactive configuration wizard (with <code class="language-plaintext highlighter-rouge">./frl-proxy configure</code>) or manually <a href="#network-options">in the config file</a>.</p> <h1 id="proxy-configuration"> <a href="#proxy-configuration" class="anchor-heading" aria-labelledby="proxy-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Proxy Configuration </h1> <p>The configuration file is named <code class="language-plaintext highlighter-rouge">proxy-conf.toml</code> by default. It uses <a href="https://toml.io/">TOML</a> syntax.</p> <p>Running <code class="language-plaintext highlighter-rouge">start</code> for the first time will start a configuration wizard that will prompt you to set up the configuration file. The configuration file can be updated at any time by using the <code class="language-plaintext highlighter-rouge">configure</code> command.</p> <p>Example:</p> <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[proxy]</span>
<span class="py">mode</span> <span class="p">=</span> <span class="s">"cache"</span>
<span class="py">host</span> <span class="p">=</span> <span class="s">"0.0.0.0"</span>
<span class="py">port</span> <span class="p">=</span> <span class="s">"8080"</span>
<span class="py">ssl_port</span> <span class="p">=</span> <span class="s">"8443"</span>
<span class="py">remote_host</span> <span class="p">=</span> <span class="s">"https://lcs-cops.adobe.io"</span>
<span class="py">ssl</span> <span class="p">=</span> <span class="kc">true</span>

<span class="nn">[ssl]</span>
<span class="py">cert_path</span> <span class="p">=</span> <span class="s">"proxy-cert.pfx"</span>
<span class="py">cert_password</span> <span class="p">=</span> <span class="s">""</span>

<span class="nn">[logging]</span>
<span class="py">level</span> <span class="p">=</span> <span class="s">"debug"</span>
<span class="py">destination</span> <span class="p">=</span> <span class="s">"console"</span>
<span class="py">file_path</span> <span class="p">=</span> <span class="s">"proxy-log.log"</span>

<span class="nn">[cache]</span>
<span class="py">db_path</span> <span class="p">=</span> <span class="s">"proxy-cache.sqlite"</span>

<span class="nn">[network]</span>
<span class="py">use_proxy</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">proxy_host</span> <span class="p">=</span> <span class="s">"127.0.0.1"</span>
<span class="py">proxy_port</span> <span class="p">=</span> <span class="s">"8888"</span>
<span class="py">use_basic_auth</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">proxy_username</span> <span class="p">=</span> <span class="s">""</span>
<span class="py">proxy_password</span> <span class="p">=</span> <span class="s">""</span>
</code></pre></div></div> <h2 id="proxy-options"> <a href="#proxy-options" class="anchor-heading" aria-labelledby="proxy-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Proxy Options </h2> <p>The configuration options in the <code class="language-plaintext highlighter-rouge">[proxy]</code> section of the config file govern proxy behavior.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">mode</code></td> <td>Mode of operation - <code class="language-plaintext highlighter-rouge">passthrough</code>, <code class="language-plaintext highlighter-rouge">cache</code>, <code class="language-plaintext highlighter-rouge">store</code>, or <code class="language-plaintext highlighter-rouge">forward</code><br />Overridden with <code class="language-plaintext highlighter-rouge">-m/--mode</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">host</code></td> <td>The host IP the proxy listens on</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">port</code></td> <td>The host port the proxy listens on in http (non-SSL) mode</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ssl_port</code></td> <td>The host port the proxy listens on in https (SSL) mode</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">remote_host</code></td> <td>Adobe Licensing Service endpoint</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ssl</code></td> <td>Enable (<code class="language-plaintext highlighter-rouge">true</code>) or disable (<code class="language-plaintext highlighter-rouge">false</code>) SSL<br />Overridden with <code class="language-plaintext highlighter-rouge">-ssl</code></td> </tr> </tbody> </table></div> <h2 id="ssl-options"> <a href="#ssl-options" class="anchor-heading" aria-labelledby="ssl-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SSL Options </h2> <p>The configuration options in the <code class="language-plaintext highlighter-rouge">[ssl]</code> section of the config file specify SSL certificate options</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">cert_path</code></td> <td>Path to SSL certificate file. Required if <code class="language-plaintext highlighter-rouge">ssl</code> is <code class="language-plaintext highlighter-rouge">true</code> and ignored otherwise</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">cert_password</code></td> <td>SSL certificate password. IF not specified, then the environment variable <code class="language-plaintext highlighter-rouge">FRL_PROXY_SSL.CERT_PASSWORD</code> is checked</td> </tr> </tbody> </table></div> <h2 id="logging-options"> <a href="#logging-options" class="anchor-heading" aria-labelledby="logging-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Logging Options </h2> <p>Options in the <code class="language-plaintext highlighter-rouge">[logging]</code> section govern logging behavior. By default, the proxy will log to the console (<code class="language-plaintext highlighter-rouge">stdout</code>) at the <code class="language-plaintext highlighter-rouge">info</code> verbosity level. The config can be used to change the console logging verbosity level or write log data to a file at a potentially different verbosity level.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">level</code></td> <td>Set the verbosity level for log output<br /><code class="language-plaintext highlighter-rouge">-d</code> overrides this and sets level to <code class="language-plaintext highlighter-rouge">debug</code><br /><code class="language-plaintext highlighter-rouge">-dd</code> will set level to <code class="language-plaintext highlighter-rouge">trace</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">destination</code></td> <td>Log to <code class="language-plaintext highlighter-rouge">console</code> or <code class="language-plaintext highlighter-rouge">file</code><br />Overridden with <code class="language-plaintext highlighter-rouge">-l/--log-to</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">file_path</code></td> <td>Filename for file log output. Ignored if <code class="language-plaintext highlighter-rouge">destination</code> is <code class="language-plaintext highlighter-rouge">console</code></td> </tr> </tbody> </table></div> <p><strong>Verbosity settings</strong></p> <p>The log verbosity level governs the nature and amount of information that is written to the log. The proxy supports five levels, which can be set in the config file. Log messages are prioritized based on message type - setting verbosity to a certain level will write messages at that level’s priority and anything above it. For example, setting the level to <code class="language-plaintext highlighter-rouge">warn</code> will output warnings and errors.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Level</th> <th style="text-align: center">Priority</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">error</code></td> <td style="text-align: center">1</td> <td>Errors that impact the performance or reliability of the application</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">warn</code></td> <td style="text-align: center">2</td> <td>Warnings that may indicate an issue, but should not impact general performance or reliability</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">info</code></td> <td style="text-align: center">3</td> <td>Useful messages</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">debug</code></td> <td style="text-align: center">4</td> <td>Lower-priority messages that may be useful for debugging purposes</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">trace</code></td> <td style="text-align: center">5</td> <td>Low-level application debugging information</td> </tr> </tbody> </table></div> <h2 id="cache-options"> <a href="#cache-options" class="anchor-heading" aria-labelledby="cache-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cache Options </h2> <p><code class="language-plaintext highlighter-rouge">[cache]</code> specifies cache options</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">db_path</code></td> <td>Path to cache DB</td> </tr> </tbody> </table></div> <h2 id="network-options"> <a href="#network-options" class="anchor-heading" aria-labelledby="network-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Network Options </h2> <p><code class="language-plaintext highlighter-rouge">[network]</code> configures upstream proxy options.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">use_proxy</code></td> <td>Enable upstream proxy connection</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">proxy_host</code></td> <td>Hostname or IP address of upstream proxy</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">proxy_port</code></td> <td>Port to use for upstream proxy connection</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">use_basic_auth</code></td> <td>Enable basic authentication?</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">proxy_username</code></td> <td>Username for basic authentication</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">proxy_password</code></td> <td>Password for basic authentication</td> </tr> </tbody> </table></div> <h1 id="running-as-a-service"> <a href="#running-as-a-service" class="anchor-heading" aria-labelledby="running-as-a-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running as a service </h1> <p>To ensure the highest level of availability and reliability, the proxy should be run as a service. This ensures that the proxy is always running. If the service is interrupted for any reason (such as system reboot), it will automatically restart.</p> <p>There are different methods for installing and enabling the proxy as a service depending on the environment.</p> <h2 id="windows-1"> <a href="#windows-1" class="anchor-heading" aria-labelledby="windows-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Windows </h2> <p>Windows realeases of FRL Online Proxy include tools for setting up the service. The script <code class="language-plaintext highlighter-rouge">bin\service.ps1</code> provides a simple interface for managing the proxy as a service.</p> <p>Example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; .\service.ps1 start
Service "FRL Online Proxy" installed successfully!
FRL Online Proxy: START: The operation completed successfully.
</code></pre></div></div> <p>Notes:</p> <ul> <li>Windows Powershell is required to run <code class="language-plaintext highlighter-rouge">service.ps1</code></li> <li>Administrator rights are required to install the service, so run <code class="language-plaintext highlighter-rouge">service.ps1</code> from a Powershell Admin console.</li> <li><code class="language-plaintext highlighter-rouge">service.ps1</code> must be run from the <code class="language-plaintext highlighter-rouge">frl-proxy</code> working directory</li> <li>A config file is required with the filename <code class="language-plaintext highlighter-rouge">proxy-conf.toml</code>. This file must be in the same working directory as <code class="language-plaintext highlighter-rouge">frl-proxy.exe</code> and <code class="language-plaintext highlighter-rouge">service.ps1</code>. See <a href="#proxy-configuration">Proxy configuration</a> for more information.</li> </ul> <p>Commands:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">start</code></td> <td>Install and start the proxy as a service.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">stop</code></td> <td>Stop the proxy service</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">restart</code></td> <td>Restart the proxy service</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">remove</code></td> <td>Stop the service if necessary and remove from the registry</td> </tr> </tbody> </table></div> <p>When the service is installed and running, you can view the status of the service in Windows Service Manager.</p> <ol> <li>Open the run dialog - <code class="language-plaintext highlighter-rouge">Windows Key + R</code></li> <li>Enter the command <code class="language-plaintext highlighter-rouge">services.msc</code></li> <li>Press Enter</li> <li>The Service Manager will open showing a list of services installed on the system</li> <li>Ensure that FRL Online Proxy is installed, running and has a Startup Type of “Automatic” <img src="/frl-online-proxy/en/media/windows_service.png" alt="Service Manager" /></li> </ol> <p>If something doesn’t work as expected, see <a href="#getting-help">Getting help</a>.</p> <h2 id="linux-1"> <a href="#linux-1" class="anchor-heading" aria-labelledby="linux-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linux </h2> <p>On Linux systems, the easiest way to set up a service for the proxy is <a href="https://systemd.io/">systemd</a>.</p> <p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">sudo</code> privileges are required for many of these steps. We recommend creating or designating a non-privileged user account that will run the proxy and own the configuration and log files.</p> <ol> <li>Download the latest release to the desired system.</li> <li>Extract the <code class="language-plaintext highlighter-rouge">frl-proxy</code> binary to a system binary directory such as <code class="language-plaintext highlighter-rouge">/usr/bin</code></li> <li>Generate a config file (see <a href="#proxy-configuration">Proxy configuration</a>)</li> <li>Open the config file in a text editor and configure proxy and logging settings (host, ssl settings) <ul> <li>If the proxy will be run by a non-privileged account, it is necessary to set the proxy to listen on a port number higher than 1024 (e.g. 4343)</li> <li>The config file should be copied to a system data directory (we recommend <code class="language-plaintext highlighter-rouge">/etc/frl-proxy</code>)</li> <li>The log file should be written to a system log directory such as <code class="language-plaintext highlighter-rouge">/var/log</code> (we recommend <code class="language-plaintext highlighter-rouge">/var/log/frl-proxy</code>)</li> </ul> </li> <li>If you are going to run the proxy as a non-privileged user, change ownership of config file and log directory. Replace <code class="language-plaintext highlighter-rouge">[user]</code> and <code class="language-plaintext highlighter-rouge">[group]</code> with the user and group of the non-privileged account. <ul> <li><code class="language-plaintext highlighter-rouge">sudo chown [user]:[group] /etc/frl-proxy/proxy-conf.toml</code></li> <li><code class="language-plaintext highlighter-rouge">sudo chown -R [user]:[group] /var/log/frl-proxy</code></li> </ul> </li> <li>Create the service configuration file <code class="language-plaintext highlighter-rouge">/etc/systemd/system/frl-proxy.service</code> and open it in a text editor</li> <li> <p>Copy this example configuration to the editor. Be sure to change the paths to the proxy binary and config file if necessary. And replace <code class="language-plaintext highlighter-rouge">[user]</code> with the name of the account that will run the proxy.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Unit]
Description=FRL Online Proxy
After=network.target
StartLimitIntervalSec=0

[Service]
Type=simple
Restart=always
RestartSec=1
User=[user]
ExecStart=/usr/bin/frl-proxy -c /etc/frl-proxy/proxy-conf.toml start

[Install]
WantedBy=multi-user.target
</code></pre></div> </div> </li> </ol> <p>With the service config in place, the service can be controlled with <code class="language-plaintext highlighter-rouge">systemctl</code>. Here are some examples of how to manage the service.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enable/disable determines if the service will start on boot</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>frl-proxy
<span class="nb">sudo </span>systemctl disable frl-proxy

<span class="c"># Start/stop will manually start and stop the service, restart will stop and then start it</span>
<span class="nb">sudo </span>systemctl start frl-proxy
<span class="nb">sudo </span>systemctl stop frl-proxy
<span class="nb">sudo </span>systemctl restart frl-proxy

<span class="c"># If any changes are made to the frl-proxy.service config, the systemd daemon must be reloaded</span>
<span class="nb">sudo </span>systemctl daemon-reload
</code></pre></div></div> <p>If something doesn’t work as expected, see <a href="#getting-help">Getting help</a>.</p> <h1 id="creating-proxy-enabled-packages"> <a href="#creating-proxy-enabled-packages" class="anchor-heading" aria-labelledby="creating-proxy-enabled-packages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating proxy-enabled packages </h1> <p>FRL-Online packages must be configured to use the proxy. Proxy settings are managed in the Adobe Admin Console.</p> <ol> <li>Log into the <a href="https://adminconsole.adobe.com">Admin Console</a></li> <li>Click the “Packages” tab on the top navigation bar.</li> <li>Click the blue “Create a Package” button.</li> <li>Select “Feature restricted licensing” and then “Next”</li> <li>Select “Online” and then “Next”</li> <li>Select entitlement, OS and product (app) options</li> <li> <p>On the next page, under “Management Options”, select “Contact Adobe through a reverse proxy”</p> <p><img src="/frl-online-proxy/en/media/proxy_setting.png" alt="Proxy Setting" /></p> <p>Update the “DNS Entry or IP address” field to point to the FRL Online Proxy service. This can be a plain IP address or a hostname. Don’t forget to specify the port number if using a non-standard port.</p> </li> </ol> <h1 id="getting-help"> <a href="#getting-help" class="anchor-heading" aria-labelledby="getting-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting help </h1> <p>All bug requests, feature requests, questions and feedback submissions are handled with Github issues. Please create a new <a href="https://github.com/adobe/frl-online-proxy/issues">issue</a> if you need any assisance or support.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
